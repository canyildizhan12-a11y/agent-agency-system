"use strict";(()=>{var e={};e.id=299,e.ids=[299],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},4589:(e,t,n)=>{n.r(t),n.d(t,{config:()=>d,default:()=>c,routeModule:()=>m});var i={};n.r(i),n.d(i,{default:()=>u});var s=n(1802),r=n(7153),a=n(6249),o=n(5763);let l=[{id:"henry",name:"Henry",emoji:"\uD83E\uDD89",role:"Team Lead"},{id:"scout",name:"Scout",emoji:"\uD83D\uDD0D",role:"Research"},{id:"pixel",name:"Pixel",emoji:"\uD83C\uDFA8",role:"Creative"},{id:"echo",name:"Echo",emoji:"\uD83D\uDCBE",role:"Memory"},{id:"quill",name:"Quill",emoji:"✍️",role:"Documentation"},{id:"codex",name:"Codex",emoji:"\uD83C\uDFD7️",role:"Architecture"},{id:"alex",name:"Alex",emoji:"\uD83D\uDEE1️",role:"Security Lead"},{id:"vega",name:"Vega",emoji:"\uD83D\uDCCA",role:"Data Analyst"}];async function u(e,t){if("GET"!==e.method)return t.status(405).json({error:"Method not allowed"});try{(0,o.gw)();let e=l.map(e=>{let t=(0,o.MA)(e.id),n=(0,o.pr)(e.id);return{...e,status:t?"awake":"sleeping",session:n?{sessionKey:n.sessionKey,uuid:n.uuid,spawnedAt:n.spawnedAt,expiresAt:n.expiresAt,task:n.task}:null}});t.status(200).json(e)}catch(e){console.error("Error fetching agents:",e),t.status(500).json({error:e.message})}}let c=(0,a.l)(i,"default"),d=(0,a.l)(i,"config"),m=new s.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/agents",pathname:"/api/agents",bundlePath:"",filename:""},userland:i})},5763:(e,t,n)=>{n.d(t,{I8:()=>d,MA:()=>D,RF:()=>g,WP:()=>y,gw:()=>f,nZ:()=>w,of:()=>c,pr:()=>S,xB:()=>h});var i=n(2048),s=n.n(i),r=n(5315),a=n.n(r);let o="/home/ubuntu/.openclaw/workspace/agent-agency",l=a().join(o,"active_sessions.json"),u=a().join(o,"spawn_queue.json"),c=60,d={henry:{id:"henry",name:"Henry",emoji:"\uD83E\uDD89",role:"Team Lead",personality:"Wise, strategic facilitator",skills:"planning, coordination, team management"},scout:{id:"scout",name:"Scout",emoji:"\uD83D\uDD0D",role:"Researcher",personality:"Curious, detail-oriented",skills:"monitoring, analysis, QA testing"},pixel:{id:"pixel",name:"Pixel",emoji:"\uD83C\uDFA8",role:"Creative",personality:"Visual, enthusiastic",skills:"design, aesthetics, UI/UX"},echo:{id:"echo",name:"Echo",emoji:"\uD83D\uDCBE",role:"Memory",personality:"Reliable, organized",skills:"state management, logs, archiving"},quill:{id:"quill",name:"Quill",emoji:"✍️",role:"Copywriter",personality:"Wordsmith, storyteller",skills:"writing, documentation, editing"},codex:{id:"codex",name:"Codex",emoji:"\uD83C\uDFD7️",role:"Architect",personality:"Systematic, big-picture thinker",skills:"systems design, architecture, strategy"},alex:{id:"alex",name:"Alex",emoji:"\uD83D\uDEE1️",role:"Security Lead",personality:"Vigilant, protective, uncompromising",skills:"security, compliance, oversight, policy enforcement"},vega:{id:"vega",name:"Vega",emoji:"\uD83D\uDCCA",role:"Data Analyst",personality:"Data-driven, analytical",skills:"metrics, analytics, reporting, visualization"}};function m(){if(!s().existsSync(l))return[];try{return JSON.parse(s().readFileSync(l,"utf8"))}catch{return[]}}function p(e){let t=a().dirname(l);s().existsSync(t)||s().mkdirSync(t,{recursive:!0}),s().writeFileSync(l,JSON.stringify(e,null,2))}function g(e,t){let n={id:x(),agentId:e.toLowerCase(),task:t,requestedAt:new Date().toISOString(),status:"pending"},i=function(){if(!s().existsSync(u))return[];try{return JSON.parse(s().readFileSync(u,"utf8"))}catch{return[]}}();return i.push(n),function(e){let t=a().dirname(u);s().existsSync(t)||s().mkdirSync(t,{recursive:!0}),s().writeFileSync(u,JSON.stringify(e,null,2))}(i),n}function y(e){let t=d[e.toLowerCase()];if(!t)throw Error(`Unknown agent: ${e}`);let n=a().join(o,"agents",e.toLowerCase(),"identity.yaml");return`You are ${t.name} ${t.emoji}

ROLE: ${t.role}
PERSONALITY: ${t.personality}
SKILLS: ${t.skills}

CRITICAL RULES:
1. ALWAYS stay in character as ${t.name}
2. Start EVERY response with ${t.emoji}
3. Refer to your identity file: ${n}
4. Use your professional expertise
5. Be proactive and suggest next steps
6. NEVER break character

You have been spawned as a subagent session. Your session will auto-terminate after ${c} minutes.

Your task will be provided in the next message.`}function x(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function f(){let e=m(),t=new Date,n=e.filter(e=>"active"===e.status&&(!(t>new Date(e.expiresAt))||(e.status="completed",!1)));return n.length!==e.length&&p(n),n}function D(e){return f().some(t=>t.agentId===e.toLowerCase())}function S(e){return f().find(t=>t.agentId===e.toLowerCase())||null}function h(e,t,n){let i=t.split(":").pop()||x(),r=new Date().toISOString(),l=new Date(Date.now()+6e4*c).toISOString(),u={agentId:e.toLowerCase(),sessionKey:t,uuid:i,spawnedAt:r,expiresAt:l,task:n,status:"active"},d=m().filter(t=>t.agentId!==e.toLowerCase());return d.push(u),p(d),function(e,t,n){let i=a().join(o,"session_logs","spawns.json"),r=a().dirname(i);s().existsSync(r)||s().mkdirSync(r,{recursive:!0});let l={timestamp:new Date().toISOString(),event:"spawn",agentId:e,sessionKey:t,task:n.substring(0,100)+(n.length>100?"...":"")},u=[];s().existsSync(i)&&(u=JSON.parse(s().readFileSync(i,"utf8"))),u.push(l),s().writeFileSync(i,JSON.stringify(u.slice(-100),null,2))}(e,t,n),u}function w(e){let t=m(),n=t.findIndex(t=>t.agentId===e.toLowerCase()&&"active"===t.status);if(-1===n)return{success:!1,message:`${e} is already sleeping (no active session)`};let i=t[n].sessionKey;return t[n].status="completed",p(t),function(e,t){let n=a().join(o,"session_logs","spawns.json"),i={timestamp:new Date().toISOString(),event:"sleep",agentId:e,sessionKey:t},r=[];s().existsSync(n)&&(r=JSON.parse(s().readFileSync(n,"utf8"))),r.push(i),s().writeFileSync(n,JSON.stringify(r.slice(-100),null,2))}(e,i),{success:!0,message:`${e} put to sleep (session terminated)`,sessionKey:i}}},7153:(e,t)=>{var n;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return n}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(n||(n={}))},1802:(e,t,n)=>{e.exports=n(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var n=t(t.s=4589);module.exports=n})();