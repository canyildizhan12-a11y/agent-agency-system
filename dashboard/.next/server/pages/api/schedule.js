"use strict";(()=>{var e={};e.id=856,e.ids=[856],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},229:(e,t,r)=>{r.r(t),r.d(t,{config:()=>l,default:()=>c,routeModule:()=>d});var n={};r.r(n),r.d(n,{default:()=>u});var s=r(1802),a=r(7153),i=r(6249),o=r(4614);async function u(e,t){if("POST"!==e.method)return t.status(405).json({error:"Method not allowed"});let{agentId:r,task:n,schedule:s,naturalLanguage:a}=e.body;if(!r||!n)return t.status(400).json({error:"Agent ID and task required"});try{let e=s;if(a&&(e=function(e){let t=new Date,r=e.match(/in (\d+) minutes?/i);if(r){let e=parseInt(r[1]),n=new Date(t.getTime()+6e4*e);return`${n.getMinutes()} ${n.getHours()} * * *`}let n=e.match(/in (\d+) hours?/i);if(n){let e=parseInt(n[1]),r=new Date(t.getTime()+36e5*e);return`${r.getMinutes()} ${r.getHours()} * * *`}let s=e.match(/daily at (\d+)(?::(\d+))?\s*(am|pm)?/i);if(s){let e=parseInt(s[1]),t=s[2]?parseInt(s[2]):0,r=s[3];return"pm"===r&&e<12&&(e+=12),"am"===r&&12===e&&(e=0),`${t} ${e} * * *`}let a=e.match(/every (\d+) minutes?/i);if(a){let e=parseInt(a[1]);return`*/${e} * * * *`}return e}(a)),!e)return t.status(400).json({error:"Invalid schedule"});let i=`Dashboard: ${r} - ${n.substring(0,30)}...`,u=await (0,o.uF)(i,e,n);t.status(200).json({success:!0,agentId:r,schedule:e,task:n,message:`ðŸ“… Scheduled: "${n}" at ${a||e}`,openclawResult:u})}catch(e){console.error("Error creating cron:",e),t.status(500).json({error:e.message})}}let c=(0,i.l)(n,"default"),l=(0,i.l)(n,"config"),d=new s.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/schedule",pathname:"/api/schedule",bundlePath:"",filename:""},userland:n})},4614:(e,t,r)=>{r.d(t,{uF:()=>m,Uf:()=>h});let n=require("child_process");var s=r(2048),a=r.n(s),i=r(5315),o=r.n(i);let u="/home/ubuntu/.openclaw/workspace",c=o().join(u,"agent-agency"),l=o().join(c,"session_cache");a().existsSync(l)||a().mkdirSync(l,{recursive:!0});let d={echo:{name:"Echo",emoji:"\uD83D\uDCBE",role:"Memory",personality:"Practical, efficient",skills:"state management, logs"}},p={};async function m(e,t,r){let s=t.includes(" ")?t:`0 */${parseInt(t)||1} * * *`;try{let t=(0,n.execSync)(`cd ${u} && openclaw cron add --name "${e}" --schedule "${s}" --message "${r}" --target isolated 2>&1`,{encoding:"utf8",timeout:3e4});return{success:!0,output:t}}catch(e){return{success:!1,error:e.message}}}function h(){var e,t;let r=d.echo,n="Analyze dashboard performance",s=(e=r,t=n,`[${e.emoji} ${e.name}|${e.role}] ${e.personality}. Skills: ${e.skills}. RULES: Stay in character. Start with ${e.emoji}. TASK: ${t}`).split(" ").length,a=`You are ${r.name}, ${r.role} ${r.emoji}

PERSONALITY: ${r.personality}
EXPERTISE: ${r.skills}

CRITICAL RULES:
1. ALWAYS stay in character as ${r.name}
2. Start EVERY response with ${r.emoji}
3. Use your professional expertise
4. Be proactive and suggest next steps
5. NEVER break character

[TASK FROM CAN via AGENCY DASHBOARD]
${n}

Execute this task as ${r.name}. Provide your response in character.`.split(" ").length,i=a-s;return{compressed:s,full:a,savings:i,percentage:Math.round(i/a*100)}}},7153:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(e,t,r)=>{e.exports=r(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=t(t.s=229);module.exports=r})();